{"ast":null,"code":"import React,{useState,useEffect}from'react';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faTimes,faPaperPlane}from'@fortawesome/free-solid-svg-icons';import axios from'axios';import'./Chatbot.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_BASE_URL=process.env.REACT_APP_API_BASE_URL||'https://budgetbuddy-backend.onrender.com';const Chatbot=()=>{const[chatbotOpen,setChatbotOpen]=useState(false);const[chatMessages,setChatMessages]=useState([{sender:'bot',text:'Hello! I\\'m your BudgetBuddy assistant. How can I help you today?',timestamp:new Date().toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'})}]);const[userMessage,setUserMessage]=useState('');const[isTyping,setIsTyping]=useState(false);const handleChatSubmit=async e=>{e.preventDefault();if(!userMessage.trim())return;const newUserMessage={sender:'user',text:userMessage,timestamp:new Date().toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'})};setChatMessages(prev=>[...prev,newUserMessage]);setUserMessage('');setIsTyping(true);try{const response=await axios.post(`${API_BASE_URL}/api/chatbot/`,{message:userMessage,user_id:localStorage.getItem('user_id')},{headers:{Authorization:`Bearer ${localStorage.getItem('access_token')}`}});const botMessage={sender:'bot',text:response.data.response,timestamp:new Date().toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'})};setChatMessages(prev=>[...prev,botMessage]);}catch(error){console.error('Chatbot error:',error);const botMessage={sender:'bot',text:\"I'm having trouble connecting to the server. Please try again later.\",timestamp:new Date().toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'})};setChatMessages(prev=>[...prev,botMessage]);}finally{setIsTyping(false);}};// Auto-scroll to bottom when new messages arrive\nuseEffect(()=>{const messagesContainer=document.querySelector('.chat-messages');if(messagesContainer){messagesContainer.scrollTop=messagesContainer.scrollHeight;}},[chatMessages]);return/*#__PURE__*/_jsxs(\"div\",{className:`chatbot-container ${chatbotOpen?'open':''}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chatbot-header\",onClick:()=>setChatbotOpen(!chatbotOpen),children:[/*#__PURE__*/_jsx(\"h3\",{children:\"BudgetBuddy Assistant\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-icon\",onClick:e=>{e.stopPropagation();setChatbotOpen(false);},children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faTimes})})]}),chatbotOpen&&/*#__PURE__*/_jsxs(\"div\",{className:\"chatbot-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chat-messages\",children:[chatMessages.map((message,index)=>/*#__PURE__*/_jsxs(\"div\",{className:`message ${message.sender}`,children:[/*#__PURE__*/_jsx(\"p\",{children:message.text.split('\\n').map((line,i)=>/*#__PURE__*/_jsxs(React.Fragment,{children:[line,/*#__PURE__*/_jsx(\"br\",{})]},i))}),/*#__PURE__*/_jsx(\"small\",{children:message.timestamp})]},index)),isTyping&&/*#__PURE__*/_jsx(\"div\",{className:\"message bot\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Typing...\"})})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleChatSubmit,className:\"chat-input\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:userMessage,onChange:e=>setUserMessage(e.target.value),placeholder:\"Ask me about your budget...\",disabled:isTyping}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isTyping||!userMessage.trim(),children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faPaperPlane})})]})]})]});};export default Chatbot;","map":{"version":3,"names":["React","useState","useEffect","FontAwesomeIcon","faTimes","faPaperPlane","axios","jsx","_jsx","jsxs","_jsxs","API_BASE_URL","process","env","REACT_APP_API_BASE_URL","Chatbot","chatbotOpen","setChatbotOpen","chatMessages","setChatMessages","sender","text","timestamp","Date","toLocaleTimeString","hour","minute","userMessage","setUserMessage","isTyping","setIsTyping","handleChatSubmit","e","preventDefault","trim","newUserMessage","prev","response","post","message","user_id","localStorage","getItem","headers","Authorization","botMessage","data","error","console","messagesContainer","document","querySelector","scrollTop","scrollHeight","className","children","onClick","stopPropagation","icon","map","index","split","line","i","Fragment","onSubmit","type","value","onChange","target","placeholder","disabled"],"sources":["C:/Users/pmwen/OneDrive/Desktop/budgeting-app/budgeting-app-frontend/src/components/common/Chatbot.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faTimes, faPaperPlane } from '@fortawesome/free-solid-svg-icons';\r\nimport axios from 'axios';\r\nimport './Chatbot.css';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'https://budgetbuddy-backend.onrender.com';\r\n\r\nconst Chatbot = () => {\r\n  const [chatbotOpen, setChatbotOpen] = useState(false);\r\n  const [chatMessages, setChatMessages] = useState([\r\n    { \r\n      sender: 'bot', \r\n      text: 'Hello! I\\'m your BudgetBuddy assistant. How can I help you today?', \r\n      timestamp: new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}) \r\n    }\r\n  ]);\r\n  const [userMessage, setUserMessage] = useState('');\r\n  const [isTyping, setIsTyping] = useState(false);\r\n\r\n  const handleChatSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!userMessage.trim()) return;\r\n    \r\n    const newUserMessage = {\r\n      sender: 'user',\r\n      text: userMessage,\r\n      timestamp: new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})\r\n    };\r\n    \r\n    setChatMessages(prev => [...prev, newUserMessage]);\r\n    setUserMessage('');\r\n    setIsTyping(true);\r\n    \r\n    try {\r\n      const response = await axios.post(`${API_BASE_URL}/api/chatbot/`, {\r\n        message: userMessage,\r\n        user_id: localStorage.getItem('user_id')\r\n      }, {\r\n        headers: { Authorization: `Bearer ${localStorage.getItem('access_token')}` }\r\n      });\r\n      \r\n      const botMessage = {\r\n        sender: 'bot',\r\n        text: response.data.response,\r\n        timestamp: new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})\r\n      };\r\n      setChatMessages(prev => [...prev, botMessage]);\r\n    } catch (error) {\r\n      console.error('Chatbot error:', error);\r\n      const botMessage = {\r\n        sender: 'bot',\r\n        text: \"I'm having trouble connecting to the server. Please try again later.\",\r\n        timestamp: new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})\r\n      };\r\n      setChatMessages(prev => [...prev, botMessage]);\r\n    } finally {\r\n      setIsTyping(false);\r\n    }\r\n  };\r\n\r\n  // Auto-scroll to bottom when new messages arrive\r\n  useEffect(() => {\r\n    const messagesContainer = document.querySelector('.chat-messages');\r\n    if (messagesContainer) {\r\n      messagesContainer.scrollTop = messagesContainer.scrollHeight;\r\n    }\r\n  }, [chatMessages]);\r\n\r\n  return (\r\n    <div className={`chatbot-container ${chatbotOpen ? 'open' : ''}`}>\r\n      <div className=\"chatbot-header\" onClick={() => setChatbotOpen(!chatbotOpen)}>\r\n        <h3>BudgetBuddy Assistant</h3>\r\n        <button \r\n          className=\"btn-icon\" \r\n          onClick={(e) => {\r\n            e.stopPropagation();\r\n            setChatbotOpen(false);\r\n          }}\r\n        >\r\n          <FontAwesomeIcon icon={faTimes} />\r\n        </button>\r\n      </div>\r\n      \r\n      {chatbotOpen && (\r\n        <div className=\"chatbot-content\">\r\n          <div className=\"chat-messages\">\r\n            {chatMessages.map((message, index) => (\r\n              <div key={index} className={`message ${message.sender}`}>\r\n                <p>{message.text.split('\\n').map((line, i) => (\r\n                  <React.Fragment key={i}>\r\n                    {line}\r\n                    <br />\r\n                  </React.Fragment>\r\n                ))}</p>\r\n                <small>{message.timestamp}</small>\r\n              </div>\r\n            ))}\r\n            {isTyping && (\r\n              <div className=\"message bot\">\r\n                <p>Typing...</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n          \r\n          <form onSubmit={handleChatSubmit} className=\"chat-input\">\r\n            <input\r\n              type=\"text\"\r\n              value={userMessage}\r\n              onChange={(e) => setUserMessage(e.target.value)}\r\n              placeholder=\"Ask me about your budget...\"\r\n              disabled={isTyping}\r\n            />\r\n            <button type=\"submit\" disabled={isTyping || !userMessage.trim()}>\r\n              <FontAwesomeIcon icon={faPaperPlane} />\r\n            </button>\r\n          </form>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Chatbot;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}