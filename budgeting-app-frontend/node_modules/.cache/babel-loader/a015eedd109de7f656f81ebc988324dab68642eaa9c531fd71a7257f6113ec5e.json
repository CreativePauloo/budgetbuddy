{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faTimes}from'@fortawesome/free-solid-svg-icons';import'./BudgetForm.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_BASE_URL=process.env.REACT_APP_API_BASE_URL||'https://budgetbuddy-backend-eq1x.onrender.com';const BudgetForm=_ref=>{let{isOpen,onClose,onBudgetAdded,expenseCategories=[]}=_ref;const[newBudget,setNewBudget]=useState({category:expenseCategories.length>0?expenseCategories[0].name:'',limit:'',period:'monthly'});const[isSubmitting,setIsSubmitting]=useState(false);const[error,setError]=useState('');const handleSubmit=async e=>{e.preventDefault();setIsSubmitting(true);setError('');try{const response=await axios.post(`${API_BASE_URL}/budgets/`,{category:newBudget.category,limit:parseFloat(newBudget.limit),period:newBudget.period},{headers:{'Authorization':`Bearer ${localStorage.getItem('access_token')}`,'Content-Type':'application/json'}});if(onBudgetAdded)onBudgetAdded(response.data);setNewBudget({category:expenseCategories.length>0?expenseCategories[0].name:'',limit:'',period:'monthly'});onClose();}catch(error){var _error$response,_error$response2,_error$response2$data;console.error('Budget creation error:',(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data);setError(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.detail)||'Failed to create budget');}finally{setIsSubmitting(false);}};if(!isOpen)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"budget-modal-overlay\",onClick:()=>!isSubmitting&&onClose(),children:/*#__PURE__*/_jsxs(\"div\",{className:\"budget-modal\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Create New Budget\"}),/*#__PURE__*/_jsx(\"button\",{className:\"close-btn\",onClick:()=>!isSubmitting&&onClose(),disabled:isSubmitting,children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faTimes})})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"form-error\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"budget-category\",children:\"Category\"}),/*#__PURE__*/_jsx(\"select\",{id:\"budget-category\",value:newBudget.category,onChange:e=>setNewBudget({...newBudget,category:e.target.value}),required:true,disabled:isSubmitting,children:expenseCategories.map(cat=>/*#__PURE__*/_jsx(\"option\",{value:cat.name,children:cat.name.charAt(0).toUpperCase()+cat.name.slice(1)},cat.name))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"budget-limit\",children:\"Amount\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"budget-limit\",value:newBudget.limit,onChange:e=>setNewBudget({...newBudget,limit:e.target.value}),step:\"0.01\",min:\"0.01\",placeholder:\"Budget limit\",required:true,disabled:isSubmitting})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"budget-period\",children:\"Period\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"budget-period\",value:newBudget.period,onChange:e=>setNewBudget({...newBudget,period:e.target.value}),required:true,disabled:isSubmitting,children:[/*#__PURE__*/_jsx(\"option\",{value:\"weekly\",children:\"Weekly\"}),/*#__PURE__*/_jsx(\"option\",{value:\"monthly\",children:\"Monthly\"}),/*#__PURE__*/_jsx(\"option\",{value:\"yearly\",children:\"Yearly\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:()=>!isSubmitting&&onClose(),disabled:isSubmitting,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",disabled:isSubmitting,children:isSubmitting?'Creating...':'Create Budget'})]})]})]})});};export default BudgetForm;","map":{"version":3,"names":["React","useState","axios","FontAwesomeIcon","faTimes","jsx","_jsx","jsxs","_jsxs","API_BASE_URL","process","env","REACT_APP_API_BASE_URL","BudgetForm","_ref","isOpen","onClose","onBudgetAdded","expenseCategories","newBudget","setNewBudget","category","length","name","limit","period","isSubmitting","setIsSubmitting","error","setError","handleSubmit","e","preventDefault","response","post","parseFloat","headers","localStorage","getItem","data","_error$response","_error$response2","_error$response2$data","console","detail","className","onClick","children","stopPropagation","disabled","icon","onSubmit","htmlFor","id","value","onChange","target","required","map","cat","charAt","toUpperCase","slice","type","step","min","placeholder"],"sources":["C:/Users/pmwen/OneDrive/Desktop/budgeting-app/budgeting-app-frontend/src/components/dashboard/BudgetForm.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faTimes } from '@fortawesome/free-solid-svg-icons';\r\nimport './BudgetForm.css'; \r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'https://budgetbuddy-backend-eq1x.onrender.com';\r\n\r\nconst BudgetForm = ({ \r\n  isOpen, \r\n  onClose, \r\n  onBudgetAdded, \r\n  expenseCategories = [] \r\n}) => {\r\n  const [newBudget, setNewBudget] = useState({\r\n    category: expenseCategories.length > 0 ? expenseCategories[0].name : '',\r\n    limit: '',\r\n    period: 'monthly'\r\n  });\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setIsSubmitting(true);\r\n    setError('');\r\n\r\n    try {\r\n      const response = await axios.post(\r\n        `${API_BASE_URL}/budgets/`,\r\n        {\r\n          category: newBudget.category,\r\n          limit: parseFloat(newBudget.limit),\r\n          period: newBudget.period\r\n        },\r\n        {\r\n          headers: {\r\n            'Authorization': `Bearer ${localStorage.getItem('access_token')}`,\r\n            'Content-Type': 'application/json'\r\n          }\r\n        }\r\n      );\r\n\r\n      if (onBudgetAdded) onBudgetAdded(response.data);\r\n      setNewBudget({\r\n        category: expenseCategories.length > 0 ? expenseCategories[0].name : '',\r\n        limit: '',\r\n        period: 'monthly'\r\n      });\r\n      onClose();\r\n    } catch (error) {\r\n      console.error('Budget creation error:', error.response?.data);\r\n      setError(error.response?.data?.detail || 'Failed to create budget');\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"budget-modal-overlay\" onClick={() => !isSubmitting && onClose()}>\r\n      <div className=\"budget-modal\" onClick={e => e.stopPropagation()}>\r\n        <div className=\"modal-header\">\r\n          <h2>Create New Budget</h2>\r\n          <button \r\n            className=\"close-btn\" \r\n            onClick={() => !isSubmitting && onClose()}\r\n            disabled={isSubmitting}\r\n          >\r\n            <FontAwesomeIcon icon={faTimes} />\r\n          </button>\r\n        </div>\r\n        \r\n        {error && <div className=\"form-error\">{error}</div>}\r\n        \r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"budget-category\">Category</label>\r\n            <select\r\n              id=\"budget-category\"\r\n              value={newBudget.category}\r\n              onChange={(e) => setNewBudget({...newBudget, category: e.target.value})}\r\n              required\r\n              disabled={isSubmitting}\r\n            >\r\n              {expenseCategories.map(cat => (\r\n                <option key={cat.name} value={cat.name}>\r\n                  {cat.name.charAt(0).toUpperCase() + cat.name.slice(1)}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n          \r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"budget-limit\">Amount</label>\r\n            <input\r\n              type=\"number\"\r\n              id=\"budget-limit\"\r\n              value={newBudget.limit}\r\n              onChange={(e) => setNewBudget({...newBudget, limit: e.target.value})}\r\n              step=\"0.01\"\r\n              min=\"0.01\"\r\n              placeholder=\"Budget limit\"\r\n              required\r\n              disabled={isSubmitting}\r\n            />\r\n          </div>\r\n          \r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"budget-period\">Period</label>\r\n            <select\r\n              id=\"budget-period\"\r\n              value={newBudget.period}\r\n              onChange={(e) => setNewBudget({...newBudget, period: e.target.value})}\r\n              required\r\n              disabled={isSubmitting}\r\n            >\r\n              <option value=\"weekly\">Weekly</option>\r\n              <option value=\"monthly\">Monthly</option>\r\n              <option value=\"yearly\">Yearly</option>\r\n            </select>\r\n          </div>\r\n          \r\n          <div className=\"form-actions\">\r\n            <button \r\n              type=\"button\" \r\n              className=\"btn btn-secondary\" \r\n              onClick={() => !isSubmitting && onClose()}\r\n              disabled={isSubmitting}\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button \r\n              type=\"submit\" \r\n              className=\"btn btn-primary\"\r\n              disabled={isSubmitting}\r\n            >\r\n              {isSubmitting ? 'Creating...' : 'Create Budget'}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BudgetForm;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,eAAe,KAAQ,gCAAgC,CAChE,OAASC,OAAO,KAAQ,mCAAmC,CAC3D,MAAO,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1B,KAAM,CAAAC,YAAY,CAAGC,OAAO,CAACC,GAAG,CAACC,sBAAsB,EAAI,+CAA+C,CAE1G,KAAM,CAAAC,UAAU,CAAGC,IAAA,EAKb,IALc,CAClBC,MAAM,CACNC,OAAO,CACPC,aAAa,CACbC,iBAAiB,CAAG,EACtB,CAAC,CAAAJ,IAAA,CACC,KAAM,CAACK,SAAS,CAAEC,YAAY,CAAC,CAAGnB,QAAQ,CAAC,CACzCoB,QAAQ,CAAEH,iBAAiB,CAACI,MAAM,CAAG,CAAC,CAAGJ,iBAAiB,CAAC,CAAC,CAAC,CAACK,IAAI,CAAG,EAAE,CACvEC,KAAK,CAAE,EAAE,CACTC,MAAM,CAAE,SACV,CAAC,CAAC,CACF,KAAM,CAACC,YAAY,CAAEC,eAAe,CAAC,CAAG1B,QAAQ,CAAC,KAAK,CAAC,CACvD,KAAM,CAAC2B,KAAK,CAAEC,QAAQ,CAAC,CAAG5B,QAAQ,CAAC,EAAE,CAAC,CAEtC,KAAM,CAAA6B,YAAY,CAAG,KAAO,CAAAC,CAAC,EAAK,CAChCA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBL,eAAe,CAAC,IAAI,CAAC,CACrBE,QAAQ,CAAC,EAAE,CAAC,CAEZ,GAAI,CACF,KAAM,CAAAI,QAAQ,CAAG,KAAM,CAAA/B,KAAK,CAACgC,IAAI,CAC/B,GAAGzB,YAAY,WAAW,CAC1B,CACEY,QAAQ,CAAEF,SAAS,CAACE,QAAQ,CAC5BG,KAAK,CAAEW,UAAU,CAAChB,SAAS,CAACK,KAAK,CAAC,CAClCC,MAAM,CAAEN,SAAS,CAACM,MACpB,CAAC,CACD,CACEW,OAAO,CAAE,CACP,eAAe,CAAE,UAAUC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC,EAAE,CACjE,cAAc,CAAE,kBAClB,CACF,CACF,CAAC,CAED,GAAIrB,aAAa,CAAEA,aAAa,CAACgB,QAAQ,CAACM,IAAI,CAAC,CAC/CnB,YAAY,CAAC,CACXC,QAAQ,CAAEH,iBAAiB,CAACI,MAAM,CAAG,CAAC,CAAGJ,iBAAiB,CAAC,CAAC,CAAC,CAACK,IAAI,CAAG,EAAE,CACvEC,KAAK,CAAE,EAAE,CACTC,MAAM,CAAE,SACV,CAAC,CAAC,CACFT,OAAO,CAAC,CAAC,CACX,CAAE,MAAOY,KAAK,CAAE,KAAAY,eAAA,CAAAC,gBAAA,CAAAC,qBAAA,CACdC,OAAO,CAACf,KAAK,CAAC,wBAAwB,EAAAY,eAAA,CAAEZ,KAAK,CAACK,QAAQ,UAAAO,eAAA,iBAAdA,eAAA,CAAgBD,IAAI,CAAC,CAC7DV,QAAQ,CAAC,EAAAY,gBAAA,CAAAb,KAAK,CAACK,QAAQ,UAAAQ,gBAAA,kBAAAC,qBAAA,CAAdD,gBAAA,CAAgBF,IAAI,UAAAG,qBAAA,iBAApBA,qBAAA,CAAsBE,MAAM,GAAI,yBAAyB,CAAC,CACrE,CAAC,OAAS,CACRjB,eAAe,CAAC,KAAK,CAAC,CACxB,CACF,CAAC,CAED,GAAI,CAACZ,MAAM,CAAE,MAAO,KAAI,CAExB,mBACET,IAAA,QAAKuC,SAAS,CAAC,sBAAsB,CAACC,OAAO,CAAEA,CAAA,GAAM,CAACpB,YAAY,EAAIV,OAAO,CAAC,CAAE,CAAA+B,QAAA,cAC9EvC,KAAA,QAAKqC,SAAS,CAAC,cAAc,CAACC,OAAO,CAAEf,CAAC,EAAIA,CAAC,CAACiB,eAAe,CAAC,CAAE,CAAAD,QAAA,eAC9DvC,KAAA,QAAKqC,SAAS,CAAC,cAAc,CAAAE,QAAA,eAC3BzC,IAAA,OAAAyC,QAAA,CAAI,mBAAiB,CAAI,CAAC,cAC1BzC,IAAA,WACEuC,SAAS,CAAC,WAAW,CACrBC,OAAO,CAAEA,CAAA,GAAM,CAACpB,YAAY,EAAIV,OAAO,CAAC,CAAE,CAC1CiC,QAAQ,CAAEvB,YAAa,CAAAqB,QAAA,cAEvBzC,IAAA,CAACH,eAAe,EAAC+C,IAAI,CAAE9C,OAAQ,CAAE,CAAC,CAC5B,CAAC,EACN,CAAC,CAELwB,KAAK,eAAItB,IAAA,QAAKuC,SAAS,CAAC,YAAY,CAAAE,QAAA,CAAEnB,KAAK,CAAM,CAAC,cAEnDpB,KAAA,SAAM2C,QAAQ,CAAErB,YAAa,CAAAiB,QAAA,eAC3BvC,KAAA,QAAKqC,SAAS,CAAC,YAAY,CAAAE,QAAA,eACzBzC,IAAA,UAAO8C,OAAO,CAAC,iBAAiB,CAAAL,QAAA,CAAC,UAAQ,CAAO,CAAC,cACjDzC,IAAA,WACE+C,EAAE,CAAC,iBAAiB,CACpBC,KAAK,CAAEnC,SAAS,CAACE,QAAS,CAC1BkC,QAAQ,CAAGxB,CAAC,EAAKX,YAAY,CAAC,CAAC,GAAGD,SAAS,CAAEE,QAAQ,CAAEU,CAAC,CAACyB,MAAM,CAACF,KAAK,CAAC,CAAE,CACxEG,QAAQ,MACRR,QAAQ,CAAEvB,YAAa,CAAAqB,QAAA,CAEtB7B,iBAAiB,CAACwC,GAAG,CAACC,GAAG,eACxBrD,IAAA,WAAuBgD,KAAK,CAAEK,GAAG,CAACpC,IAAK,CAAAwB,QAAA,CACpCY,GAAG,CAACpC,IAAI,CAACqC,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAAGF,GAAG,CAACpC,IAAI,CAACuC,KAAK,CAAC,CAAC,CAAC,EAD1CH,GAAG,CAACpC,IAET,CACT,CAAC,CACI,CAAC,EACN,CAAC,cAENf,KAAA,QAAKqC,SAAS,CAAC,YAAY,CAAAE,QAAA,eACzBzC,IAAA,UAAO8C,OAAO,CAAC,cAAc,CAAAL,QAAA,CAAC,QAAM,CAAO,CAAC,cAC5CzC,IAAA,UACEyD,IAAI,CAAC,QAAQ,CACbV,EAAE,CAAC,cAAc,CACjBC,KAAK,CAAEnC,SAAS,CAACK,KAAM,CACvB+B,QAAQ,CAAGxB,CAAC,EAAKX,YAAY,CAAC,CAAC,GAAGD,SAAS,CAAEK,KAAK,CAAEO,CAAC,CAACyB,MAAM,CAACF,KAAK,CAAC,CAAE,CACrEU,IAAI,CAAC,MAAM,CACXC,GAAG,CAAC,MAAM,CACVC,WAAW,CAAC,cAAc,CAC1BT,QAAQ,MACRR,QAAQ,CAAEvB,YAAa,CACxB,CAAC,EACC,CAAC,cAENlB,KAAA,QAAKqC,SAAS,CAAC,YAAY,CAAAE,QAAA,eACzBzC,IAAA,UAAO8C,OAAO,CAAC,eAAe,CAAAL,QAAA,CAAC,QAAM,CAAO,CAAC,cAC7CvC,KAAA,WACE6C,EAAE,CAAC,eAAe,CAClBC,KAAK,CAAEnC,SAAS,CAACM,MAAO,CACxB8B,QAAQ,CAAGxB,CAAC,EAAKX,YAAY,CAAC,CAAC,GAAGD,SAAS,CAAEM,MAAM,CAAEM,CAAC,CAACyB,MAAM,CAACF,KAAK,CAAC,CAAE,CACtEG,QAAQ,MACRR,QAAQ,CAAEvB,YAAa,CAAAqB,QAAA,eAEvBzC,IAAA,WAAQgD,KAAK,CAAC,QAAQ,CAAAP,QAAA,CAAC,QAAM,CAAQ,CAAC,cACtCzC,IAAA,WAAQgD,KAAK,CAAC,SAAS,CAAAP,QAAA,CAAC,SAAO,CAAQ,CAAC,cACxCzC,IAAA,WAAQgD,KAAK,CAAC,QAAQ,CAAAP,QAAA,CAAC,QAAM,CAAQ,CAAC,EAChC,CAAC,EACN,CAAC,cAENvC,KAAA,QAAKqC,SAAS,CAAC,cAAc,CAAAE,QAAA,eAC3BzC,IAAA,WACEyD,IAAI,CAAC,QAAQ,CACblB,SAAS,CAAC,mBAAmB,CAC7BC,OAAO,CAAEA,CAAA,GAAM,CAACpB,YAAY,EAAIV,OAAO,CAAC,CAAE,CAC1CiC,QAAQ,CAAEvB,YAAa,CAAAqB,QAAA,CACxB,QAED,CAAQ,CAAC,cACTzC,IAAA,WACEyD,IAAI,CAAC,QAAQ,CACblB,SAAS,CAAC,iBAAiB,CAC3BI,QAAQ,CAAEvB,YAAa,CAAAqB,QAAA,CAEtBrB,YAAY,CAAG,aAAa,CAAG,eAAe,CACzC,CAAC,EACN,CAAC,EACF,CAAC,EACJ,CAAC,CACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAb,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}