{"ast":null,"code":"import React,{useState,useEffect,useRef,useCallback}from'react';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faTimes,faMagic,faCheckCircle}from'@fortawesome/free-solid-svg-icons';import axios from'axios';import'./TransactionForm.css';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const API_BASE_URL=process.env.REACT_APP_API_BASE_URL||'https://budgetbuddy-backend.onrender.com';// Memoized Suggestion Button Component\nconst SuggestionButton=/*#__PURE__*/React.memo(_ref=>{let{suggestion,onClick}=_ref;return/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:`suggestion ${suggestion.isSelected?'selected':''}`,onClick:onClick,children:[suggestion.name,/*#__PURE__*/_jsxs(\"span\",{className:\"confidence-badge\",children:[Math.round(suggestion.confidence*100),\"%\"]}),suggestion.isSelected&&/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faCheckCircle,className:\"selected-icon\"})]});});const TransactionForm=_ref2=>{let{isOpen,onClose,onSubmit,initialData=null,isSubmitting=false,error='',categories=[],incomeCategories=[]}=_ref2;const[formData,setFormData]=useState({type:'expense',amount:'',description:'',category:categories.length>0?categories[0]:'',date:new Date().toISOString().split('T')[0]});const[aiSuggestions,setAiSuggestions]=useState([]);const[isPredicting,setIsPredicting]=useState(false);const timerRef=useRef(null);const formDataRef=useRef(formData);// Sync ref with formData\nuseEffect(()=>{formDataRef.current=formData;},[formData]);// Reset form when opening or when initialData changes\nuseEffect(()=>{if(isOpen){var _initialData$date;const newData=initialData?{type:initialData.type,amount:initialData.amount.toString(),description:initialData.description,category:initialData.category,date:((_initialData$date=initialData.date)===null||_initialData$date===void 0?void 0:_initialData$date.split('T')[0])||new Date().toISOString().split('T')[0]}:{type:'expense',amount:'',description:'',category:categories.length>0?categories[0]:'',date:new Date().toISOString().split('T')[0]};setFormData(newData);setAiSuggestions([]);}},[isOpen,initialData,categories]);// Stable callback for suggestion selection\nconst handleSuggestionSelect=useCallback(category=>{setFormData(prev=>({...prev,category}));setAiSuggestions(prev=>prev.map(suggestion=>({...suggestion,isSelected:suggestion.name===category})));},[]);// Handle AI suggestions without infinite loops\nuseEffect(()=>{if(!isOpen||isPredicting)return;const{description,amount}=formData;const{description:prevDesc,amount:prevAmt}=formDataRef.current;const shouldFetch=description.length>3&&amount&&(description!==prevDesc||amount!==prevAmt);if(shouldFetch){clearTimeout(timerRef.current);timerRef.current=setTimeout(async()=>{setIsPredicting(true);try{const response=await axios.post(`${API_BASE_URL}/api/predict-category/`,{description:formData.description,amount:formData.amount,date:formData.date});setAiSuggestions(prev=>{const newSuggestions=[{name:response.data.category,confidence:response.data.confidence,isSelected:false},...response.data.alternatives.map(alt=>({name:alt.category,confidence:alt.score,isSelected:false}))];// Preserve selection if category is already selected\nreturn newSuggestions.map(suggestion=>({...suggestion,isSelected:suggestion.name===formData.category}));});if(response.data.confidence>0.7){setFormData(prev=>({...prev,category:response.data.category}));}}catch(error){console.error('Prediction failed:',error);}finally{setIsPredicting(false);}},500);}return()=>clearTimeout(timerRef.current);},[formData.description,formData.amount,formData.date,isOpen,isPredicting]);const handleChange=e=>{const{name,value}=e.target;setFormData(prev=>({...prev,[name]:value}));if(name==='type'){const newCategories=value==='income'?incomeCategories:categories;setFormData(prev=>({...prev,category:newCategories.length>0?newCategories[0]:''}));}};const handleSubmit=e=>{e.preventDefault();const transactionData={...formData,amount:parseFloat(formData.amount),date:formData.date||new Date().toISOString().split('T')[0]};onSubmit(transactionData);};const currentCategories=formData.type==='income'?incomeCategories:categories;if(!isOpen)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"transaction-modal-overlay\",onClick:()=>!isSubmitting&&onClose(),children:/*#__PURE__*/_jsxs(\"div\",{className:\"transaction-modal\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:initialData?'Edit Transaction':'Add Transaction'}),/*#__PURE__*/_jsx(\"button\",{className:\"close-btn\",onClick:()=>!isSubmitting&&onClose(),disabled:isSubmitting,children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faTimes})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[error&&/*#__PURE__*/_jsx(\"div\",{className:\"form-error\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Transaction Type\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"radio-group\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"radio-label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"type\",value:\"expense\",checked:formData.type==='expense',onChange:handleChange,disabled:isSubmitting}),/*#__PURE__*/_jsx(\"span\",{className:\"radio-custom\"}),\"Expense\"]}),/*#__PURE__*/_jsxs(\"label\",{className:\"radio-label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"type\",value:\"income\",checked:formData.type==='income',onChange:handleChange,disabled:isSubmitting}),/*#__PURE__*/_jsx(\"span\",{className:\"radio-custom\"}),\"Income\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"amount\",children:\"Amount\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"amount\",name:\"amount\",value:formData.amount,onChange:handleChange,step:\"0.01\",min:\"0\",required:true,disabled:isSubmitting})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",children:\"Description\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"description-with-ai\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"description\",name:\"description\",value:formData.description,onChange:handleChange,required:true,disabled:isSubmitting}),isPredicting&&/*#__PURE__*/_jsx(\"span\",{className:\"ai-loading\",children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faMagic,spin:true})})]})]}),aiSuggestions.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"ai-suggestions\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"AI Suggestions\"}),/*#__PURE__*/_jsx(\"div\",{className:\"suggestion-buttons\",children:aiSuggestions.map(suggestion=>/*#__PURE__*/_jsx(SuggestionButton,{suggestion:suggestion,onClick:()=>handleSuggestionSelect(suggestion.name)},suggestion.name))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"category\",children:\"Category\"}),/*#__PURE__*/_jsx(\"select\",{id:\"category\",name:\"category\",value:formData.category,onChange:handleChange,required:true,disabled:isSubmitting,children:currentCategories.map(category=>/*#__PURE__*/_jsx(\"option\",{value:category,children:category.charAt(0).toUpperCase()+category.slice(1)},category))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"date\",children:\"Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",id:\"date\",name:\"date\",value:formData.date,onChange:handleChange,required:true,disabled:isSubmitting})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>!isSubmitting&&onClose(),className:\"btn btn-secondary\",disabled:isSubmitting,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",disabled:isSubmitting,children:isSubmitting?'Processing...':initialData?'Update':'Add'})]})]})]})]})});};export default TransactionForm;","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","FontAwesomeIcon","faTimes","faMagic","faCheckCircle","axios","jsxs","_jsxs","jsx","_jsx","API_BASE_URL","process","env","REACT_APP_API_BASE_URL","SuggestionButton","memo","_ref","suggestion","onClick","type","className","isSelected","children","name","Math","round","confidence","icon","TransactionForm","_ref2","isOpen","onClose","onSubmit","initialData","isSubmitting","error","categories","incomeCategories","formData","setFormData","amount","description","category","length","date","Date","toISOString","split","aiSuggestions","setAiSuggestions","isPredicting","setIsPredicting","timerRef","formDataRef","current","_initialData$date","newData","toString","handleSuggestionSelect","prev","map","prevDesc","prevAmt","shouldFetch","clearTimeout","setTimeout","response","post","newSuggestions","data","alternatives","alt","score","console","handleChange","e","value","target","newCategories","handleSubmit","preventDefault","transactionData","parseFloat","currentCategories","stopPropagation","disabled","checked","onChange","htmlFor","id","step","min","required","spin","charAt","toUpperCase","slice"],"sources":["C:/Users/pmwen/OneDrive/Desktop/budgeting-app/budgeting-app-frontend/src/components/dashboard/TransactionForm.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faTimes, faMagic, faCheckCircle } from '@fortawesome/free-solid-svg-icons';\r\nimport axios from 'axios';\r\nimport './TransactionForm.css';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'https://budgetbuddy-backend.onrender.com';\r\n\r\n// Memoized Suggestion Button Component\r\nconst SuggestionButton = React.memo(({ suggestion, onClick }) => (\r\n  <button\r\n    type=\"button\"\r\n    className={`suggestion ${suggestion.isSelected ? 'selected' : ''}`}\r\n    onClick={onClick}\r\n  >\r\n    {suggestion.name}\r\n    <span className=\"confidence-badge\">\r\n      {Math.round(suggestion.confidence * 100)}%\r\n    </span>\r\n    {suggestion.isSelected && (\r\n      <FontAwesomeIcon icon={faCheckCircle} className=\"selected-icon\" />\r\n    )}\r\n  </button>\r\n));\r\n\r\nconst TransactionForm = ({ \r\n  isOpen, \r\n  onClose, \r\n  onSubmit, \r\n  initialData = null, \r\n  isSubmitting = false,\r\n  error = '',\r\n  categories = [],\r\n  incomeCategories = []\r\n}) => {\r\n  const [formData, setFormData] = useState({\r\n    type: 'expense',\r\n    amount: '',\r\n    description: '',\r\n    category: categories.length > 0 ? categories[0] : '',\r\n    date: new Date().toISOString().split('T')[0]\r\n  });\r\n\r\n  const [aiSuggestions, setAiSuggestions] = useState([]);\r\n  const [isPredicting, setIsPredicting] = useState(false);\r\n  const timerRef = useRef(null);\r\n  const formDataRef = useRef(formData);\r\n\r\n  // Sync ref with formData\r\n  useEffect(() => {\r\n    formDataRef.current = formData;\r\n  }, [formData]);\r\n\r\n  // Reset form when opening or when initialData changes\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      const newData = initialData ? {\r\n        type: initialData.type,\r\n        amount: initialData.amount.toString(),\r\n        description: initialData.description,\r\n        category: initialData.category,\r\n        date: initialData.date?.split('T')[0] || new Date().toISOString().split('T')[0]\r\n      } : {\r\n        type: 'expense',\r\n        amount: '',\r\n        description: '',\r\n        category: categories.length > 0 ? categories[0] : '',\r\n        date: new Date().toISOString().split('T')[0]\r\n      };\r\n      \r\n      setFormData(newData);\r\n      setAiSuggestions([]);\r\n    }\r\n  }, [isOpen, initialData, categories]);\r\n\r\n  // Stable callback for suggestion selection\r\n  const handleSuggestionSelect = useCallback((category) => {\r\n    setFormData(prev => ({ ...prev, category }));\r\n    setAiSuggestions(prev => \r\n      prev.map(suggestion => ({\r\n        ...suggestion,\r\n        isSelected: suggestion.name === category\r\n      }))\r\n    );\r\n  }, []);\r\n\r\n  // Handle AI suggestions without infinite loops\r\n  useEffect(() => {\r\n    if (!isOpen || isPredicting) return;\r\n\r\n    const { description, amount } = formData;\r\n    const { description: prevDesc, amount: prevAmt } = formDataRef.current;\r\n\r\n    const shouldFetch = description.length > 3 && \r\n                       amount && \r\n                       (description !== prevDesc || amount !== prevAmt);\r\n\r\n    if (shouldFetch) {\r\n      clearTimeout(timerRef.current);\r\n      timerRef.current = setTimeout(async () => {\r\n        setIsPredicting(true);\r\n        try {\r\n          const response = await axios.post(\r\n            `${API_BASE_URL}/api/predict-category/`,\r\n            {\r\n              description: formData.description,\r\n              amount: formData.amount,\r\n              date: formData.date\r\n            }\r\n          );\r\n          \r\n          setAiSuggestions(prev => {\r\n            const newSuggestions = [\r\n              { \r\n                name: response.data.category, \r\n                confidence: response.data.confidence,\r\n                isSelected: false \r\n              },\r\n              ...response.data.alternatives.map(alt => ({\r\n                name: alt.category,\r\n                confidence: alt.score,\r\n                isSelected: false\r\n              }))\r\n            ];\r\n            \r\n            // Preserve selection if category is already selected\r\n            return newSuggestions.map(suggestion => ({\r\n              ...suggestion,\r\n              isSelected: suggestion.name === formData.category\r\n            }));\r\n          });\r\n\r\n          if (response.data.confidence > 0.7) {\r\n            setFormData(prev => ({\r\n              ...prev,\r\n              category: response.data.category\r\n            }));\r\n          }\r\n        } catch (error) {\r\n          console.error('Prediction failed:', error);\r\n        } finally {\r\n          setIsPredicting(false);\r\n        }\r\n      }, 500);\r\n    }\r\n\r\n    return () => clearTimeout(timerRef.current);\r\n  }, [formData.description, formData.amount, formData.date, isOpen, isPredicting]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({ ...prev, [name]: value }));\r\n    \r\n    if (name === 'type') {\r\n      const newCategories = value === 'income' ? incomeCategories : categories;\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        category: newCategories.length > 0 ? newCategories[0] : ''\r\n      }));\r\n    }\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const transactionData = {\r\n      ...formData,\r\n      amount: parseFloat(formData.amount),\r\n      date: formData.date || new Date().toISOString().split('T')[0]\r\n    };\r\n    onSubmit(transactionData);\r\n  };\r\n\r\n  const currentCategories = formData.type === 'income' ? incomeCategories : categories;\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"transaction-modal-overlay\" onClick={() => !isSubmitting && onClose()}>\r\n      <div className=\"transaction-modal\" onClick={e => e.stopPropagation()}>\r\n        <div className=\"modal-header\">\r\n          <h2>{initialData ? 'Edit Transaction' : 'Add Transaction'}</h2>\r\n          <button \r\n            className=\"close-btn\" \r\n            onClick={() => !isSubmitting && onClose()} \r\n            disabled={isSubmitting}\r\n          >\r\n            <FontAwesomeIcon icon={faTimes} />\r\n          </button>\r\n        </div>\r\n        \r\n        <div className=\"modal-content\">\r\n          {error && <div className=\"form-error\">{error}</div>}\r\n\r\n          <form onSubmit={handleSubmit}>\r\n            <div className=\"form-group\">\r\n              <label>Transaction Type</label>\r\n              <div className=\"radio-group\">\r\n                <label className=\"radio-label\">\r\n                  <input\r\n                    type=\"radio\"\r\n                    name=\"type\"\r\n                    value=\"expense\"\r\n                    checked={formData.type === 'expense'}\r\n                    onChange={handleChange}\r\n                    disabled={isSubmitting}\r\n                  />\r\n                  <span className=\"radio-custom\"></span>\r\n                  Expense\r\n                </label>\r\n                <label className=\"radio-label\">\r\n                  <input\r\n                    type=\"radio\"\r\n                    name=\"type\"\r\n                    value=\"income\"\r\n                    checked={formData.type === 'income'}\r\n                    onChange={handleChange}\r\n                    disabled={isSubmitting}\r\n                  />\r\n                  <span className=\"radio-custom\"></span>\r\n                  Income\r\n                </label>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"amount\">Amount</label>\r\n              <input\r\n                type=\"number\"\r\n                id=\"amount\"\r\n                name=\"amount\"\r\n                value={formData.amount}\r\n                onChange={handleChange}\r\n                step=\"0.01\"\r\n                min=\"0\"\r\n                required\r\n                disabled={isSubmitting}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"description\">Description</label>\r\n              <div className=\"description-with-ai\">\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"description\"\r\n                  name=\"description\"\r\n                  value={formData.description}\r\n                  onChange={handleChange}\r\n                  required\r\n                  disabled={isSubmitting}\r\n                />\r\n                {isPredicting && (\r\n                  <span className=\"ai-loading\">\r\n                    <FontAwesomeIcon icon={faMagic} spin />\r\n                  </span>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {aiSuggestions.length > 0 && (\r\n              <div className=\"ai-suggestions\">\r\n                <label>AI Suggestions</label>\r\n                <div className=\"suggestion-buttons\">\r\n                  {aiSuggestions.map((suggestion) => (\r\n                    <SuggestionButton\r\n                      key={suggestion.name}\r\n                      suggestion={suggestion}\r\n                      onClick={() => handleSuggestionSelect(suggestion.name)}\r\n                    />\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"category\">Category</label>\r\n              <select\r\n                id=\"category\"\r\n                name=\"category\"\r\n                value={formData.category}\r\n                onChange={handleChange}\r\n                required\r\n                disabled={isSubmitting}\r\n              >\r\n                {currentCategories.map(category => (\r\n                  <option key={category} value={category}>\r\n                    {category.charAt(0).toUpperCase() + category.slice(1)}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"date\">Date</label>\r\n              <input\r\n                type=\"date\"\r\n                id=\"date\"\r\n                name=\"date\"\r\n                value={formData.date}\r\n                onChange={handleChange}\r\n                required\r\n                disabled={isSubmitting}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-actions\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => !isSubmitting && onClose()}\r\n                className=\"btn btn-secondary\"\r\n                disabled={isSubmitting}\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button\r\n                type=\"submit\"\r\n                className=\"btn btn-primary\"\r\n                disabled={isSubmitting}\r\n              >\r\n                {isSubmitting ? 'Processing...' : initialData ? 'Update' : 'Add'}\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TransactionForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}